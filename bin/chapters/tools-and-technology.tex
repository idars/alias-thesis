\chapter{Tools and technology}
\label{ch:tools}

Different types of technology and kinds of application are reflected upon in this chapter. The following discusses reasons behind choices that were made in the implementation planning process.

\section{Choice of application setup}
\label{sec:appsetup}

% Refer to \ref{sec:requirements}

As previously stated in \autoref{sec:requirements}, the Children and Youth Clinic indicated the application to be used for tablets with medium to large screens. In Norway, most of such tablets either run a full-fledged operating system (OS) such as Windows or a mobile OS such as Android and iOS. 

As with most applications, there is a choice between the following approaches:

\begin{itemize}
    \item A \emph{native application} is written in each operating system's native languages. For Android this is Java, and Swift and Objective-C for iOS. Native applications can access all features which each OS may offer. Another native application approach is to write the application in a different language and transpile it to native code. The resulting application is then very similar to a native one and has comparable performance.
    \item A \emph{hybrid application} encapsulates a web page into a smartphone application. Such applications use a browser instance to render elements, although without the search bar and tools of the browser. This approach offers functionality that you don't get with web applications, but has usually worse performance compared to a native solution.
    \item A mobile \emph{web application} is a responsive web page shown in the user's web browser. These do not appear in app stores but function just like an ordinary web page. Lately there have been increasing interest in Progressive Web Apps (PWAs) which aim to provide mobile web pages with app-like behaviour and functionality such as push-notifications. PWAs do, however, require a website which is capable of serving HTTPS.
    \item A \emph{desktop application} is an application that can be installed on operating systems such as Windows, macOS and Linux. As some tablets run Windows, this is also an alternative to be considered. The immediate downside is that they will not run on mobile operating systems. These applications are not necessarily cross-platform, but may be if they are built with cross-platform tools and software (similarly to a hybrid application).
\end{itemize}

Progressive Web Applications are a relatively new kind of technology with increasing support in both Android and iOS. Some browsers also support adding an app icon to the user's app launcher, circumventing app stores in the process.

% Due to the uncertainty in which operating systems that are in use (and will be used in the future), going for a cross-platform solution is the most preferred.

Determining which approach to use requires paying attention to several factors: requirements, anticipated challenges and stakeholder interests among others. The requirements suggest using a cross-platform application primarily aimed for tablet devices, while Helse Vest IKT suggest using web technologies when developing the application. General factors such as cost, ease of use, responsiveness, support for older devices and debugging also play a role. 

Based on this, mobile and desktop applications are considered to be less suitable. Although mobile application frameworks make it possible to transpile JavaScript into native code, the syntaxes vary greatly and may not suit developers who are more familiar with web development. This leads us to two remaining approaches:

\begin{itemize}
    \item The first approach is based on hybrid applications, using HTML, CSS and JacaScript. These are typically built upon using a WebView, a browser instance that can be used by the application. Some frameworks offer their own JS-like language, providing additional methods and native functionality, which are compiled into traditional JavaScript.
    \item The second approach is through web applications which run in web browsers. There is always the possibility to enhance a web application, turning it into a Progressive Web Application. The application must be run through a web browser or through an app shortcut if a PWA is made.
\end{itemize}

% Although only 2D images are currently supported, it seems reasonable to pick an approach that allow more extensive functionality if desired.

Given that both hybrid applications and web applications use web browsers (WebViews) to show content on the screen, their performances are assumed to be comparable. The main difference is how a hybrid application is dependent on an app store whereas a web application is dependent on a website. In this case, a self-running application will require less server and networking resources. Comparing hybrid applications and PWAs, both support offline content, although the technology used for this in PWAs are still in an experimental state.

% Based on the reflections above, a Progressive Web Application is considered to be less suitable for this project.

\section{Frameworks}

Next to consider is frameworks. Frameworks allow developers to develop an application more efficiently by facilitating APIs, UI components, navigation, MVC patterns, utility methods or a combination of these. Some frameworks can also help deploying the application to app stores. \Cref{tab:frameworks} shows a selection of frameworks and what functionalities they offer.

\begin{table}
    \centering
    \begin{tabu}{l l L}
        \textbf{Framework} & \textbf{Functionality} & \textbf{Description} \\
        \hline
        Meteor             & Native compiler    & Code is written in JavaScript; compiles to Android, iOS and web \\
        NativeScript       & Native compiler    & Code is written in JavaScript; compiles to Android and iOS \\
        React Native       & Native compiler    & Code is written in JavaScript, JSX; compiles to Android, iOS and web; focuses on Single Page Applications (SPAs). \\
        \tabucline[hdottedline]{-}
        Apache Cordova     & App wrapper & Wraps HTML, CSS and JavaScript into a hybrid application; compiles to Android, iOS among others. \\
        Adobe PhoneGap     & App wrapper & Wraps HTML, CSS and JavaScript into a hybrid application; compiles to Android, iOS among others; commercial version of Cordova with some additional features. \\
        Ionic Capacitor    & App wrapper & Wraps HTML, CSS and JavaScript into a hybrid application; compiles to Android, iOS among others. \\
        \tabucline[hdottedline]{-}
        Angular            & Navigation       & JavaScript framework; code generation; command-line interface; support for PWAs. \\
        Framework7         & Navigation \& UI & JavaScript framework; command-line interface; UI elements. \\
        Ionic              & Navigation \& UI & JavaScript framework; command-line interface; UI elements. \\
        React              & Navigation       & JavaScript, JSX framework; virtual DOM. \\
        Vue.js             & Navigation       & JavaScript framework; virtual DOM. \\
        \tabucline[hdottedline]{-}
        Bootstrap          & UI               & UI library. \\
        Onsen              & UI               & UI library. \\
        Polymer            & UI               & UI library. \\
        Semantic UI        & UI               & UI library. \\
        styled-components  & UI               & CSS-in-JS library. \\
        \hline
    \end{tabu}
    \caption{A selection of web developer friendly frameworks for mobile and web application development}
    \label{tab:frameworks}
\end{table}

The most common way to make a hybrid application is to use an app wrapper. Apache Cordova is the original concept while Adobe PhoneGap is an extension to Cordova and acts much the same with some additional features.

It is unknown which frameworks the web developers of Helse Vest IKT have used previously, if any. A starting point is to assume that the aforementioned developers is well versed with HTML, CSS and JavaScript and have some prior experience with popular web frameworks. Any framework used for the project should therefore be easy to learn for any person skilled in HTML, CSS and JavaScript.

The frameworks listed in \autoref{tab:frameworks} should be easy enough for said developers to learn and adapt to as they all use familiar technologies, that is, when assuming prior experience with frameworks. Without any experience with frameworks, one needs to learn how they can integrated into the codebase. Syntaxes may vary, especially for React and its JSX language. Despite this, any choice of the listed frameworks would be reasonable here.

Looking at the general picture, both aforementioned approaches would be suitable. Ultimately it is a matter of preference, as Helse Vest IKT will probably have an opinion of which setup they are the most comfortable with. The deciding factor, though, is whether the application is meant to be public or for use at the hospital only. Judging by the non-functional requirements, the application is supposed to be restricted by which devices it may run on. Such restrictions are best achieved through a web application that does not depend on an app store, and a web application is therefore considered the best approach at this stage.

% \section{Storage}


% Where the application should be stored architecture
% SQL vs NoSQL

% JSON

% Lagringsmessig vil historier være serialiserte og kunne lagres i databaser. For å overføre historier kan de sendes i form av JSON-strenger som vil beskrive informasjon som

% - Paneler
% 	- Antall paneler, evt. navn på disse
% 	- Størrelse på panel(er)
% - Piktogram/avatar
%     - Plassering
% 	- Rotasjon
% 	- Størrelse
% 	- Om piktogrammet/avataren er speilvendt
% 	- Farge
% - Bakgrunn
%     - Farge eller bilde

% JSON kan også benyttes til å overføre kontoinformasjon, innstillinger og lignende. Bilder og piktogrammer overføres som filer.
